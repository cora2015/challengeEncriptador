<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <title>Challenge 01: Encriptador de Texto.</title>
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="Style.css">
  </head>

  <body>
    <div class="encabezado">
      <img src="imagenes/logo.png" class="logo">
    </div>

    <div class="contenedor">
      <div class="encriptar">
        <textarea pattern="[A-Za-z]" name="texto" class="texto" id="texto" cols="30" rows="10" placeholder="Ingresa el texto aquí"></textarea>
      </div>

      <div class="terminos">
        <p>Solo letras minúsculas y sin acentos</p>
      </div>

      <div class="botones">
        <button class="boton-encriptar" type="button" onclick="accionEncriptarMensaje()">Encriptar</button>
        <button class="boton-desencriptar" type="button" onclick="accionDesencriptarMensaje()">Desencriptar</button>
      </div>
    </div>

    <div class="encriptado">
        <div class="no-encontrado" id="noencontrado">
            <img src="imagenes/busqueda.png" id="busqueda">
            <h2 class="titulo-mensaje">Ningún mensaje ha sido encontrado</h2>
        </div>
      
      <div class="oculto mensaje-encriptado" id="mensajeencriptado">
        <textarea name="Mensaje" id="mensaje" cols="30" rows="10" class="mensaje"></textarea>
        <p class="parrafo">Ingresa el texto que deseas encriptar o desencriptar</p>
      </div>
    </div>

    <script>

    document.getElementById('texto').addEventListener('beforeinput', (event) => {
            const data = event.data;
            if(data) {
                const isAllow = /[a-z\s]+/.test(data);
                if(!isAllow) {
                    event.preventDefault();
                }
            }
        })
    
      function accionEncriptarMensaje(){
        const noEncontrado = document.getElementById('noencontrado')
        const encontrado = document.getElementById('mensajeencriptado')
        const inputTextArea = document.getElementById('texto')
        const outPutTextArea = document.getElementById('mensaje')
        encontrado.classList.remove('oculto')
        noEncontrado.classList.add('oculto')

        outPutTextArea.value = encriptarTexto(inputTextArea.value)
      }

      function accionDesencriptarMensaje(){
        const inputTextArea = document.getElementById('texto')
        const outPutTextArea = document.getElementById('mensaje')
        inputTextArea.value = desencriptarTexto(outPutTextArea.value)
      }

      function encriptarTexto(texto) {
        let textoEncriptado = texto;
        textoEncriptado = textoEncriptado
          .replace(/e/g, "enter")
          .replace(/i/g, "imes")
          .replace(/a/g, "ai")
          .replace(/o/g, "ober")
          .replace(/u/g, "ufat");
        return textoEncriptado;
      }

      function desencriptarTexto(textoEncriptado) {
        let textoDesencriptado = textoEncriptado;
        textoDesencriptado = textoDesencriptado
          .replace(/ufat/g, "u")
          .replace(/ober/g, "o")
          .replace(/ai/g, "a")
          .replace(/imes/g, "i")
          .replace(/enter/g, "e");
        return textoDesencriptado;

      }
    </script>
  </body>
</html>
